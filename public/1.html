<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Anne - AI Model Application Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        /* Chat bubble animation */
        @keyframes bubbleIn {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        .chat-bubble {
            animation: bubbleIn 0.3s ease-out forwards;
        }
        
        /* Typing indicator animation */
        @keyframes typing {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }
        
        .typing-dot {
            animation: typing 1.5s infinite ease-in-out;
        }
        .typing-dot:nth-child(2) { animation-delay: 0.3s; }
        .typing-dot:nth-child(3) { animation-delay: 0.6s; }
        
        /* Model application specific styles */
        .example-box {
            background: #f5f5f5;
            border-left: 3px solid #000;
            padding: 8px 12px;
            margin-top: 8px;
            border-radius: 0 4px 4px 0;
            font-size: 13px;
        }
        
        .option-button {
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 20px;
            padding: 6px 12px;
            margin: 4px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .option-button:hover { background: #e0e0e0; }
        .option-button.selected { background: #000; color: white; }
        
        /* Custom styles for monochrome theme */
        .bg-primary { background-color: #000; }
        .text-primary { color: #000; }
        .border-primary { border-color: #000; }
        .hover\:bg-primary:hover { background-color: #000; }
        
        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.75);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
        }
        
        .modal-content {
            background-color: #fff;
            padding: 1.5rem;
            border-radius: 0.5rem;
            max-width: 90%;
            width: 400px;
            border: 1px solid #000;
        }
        
        .modal-content h3 {
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: #000;
        }
        
        .modal-content p {
            color: #333;
            margin-bottom: 1.5rem;
            font-size: 0.875rem;
        }
        
        .modal-content button {
            width: 100%;
            background-color: #000;
            color: #fff;
            padding: 0.75rem;
            border-radius: 0.25rem;
            font-weight: 500;
            transition: background-color 0.2s;
        }
        
        .modal-content button:hover {
            background-color: #333;
        }
        
        /* Input area */
        .input-area {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 48rem;
            background-color: #fff;
            padding: 0.75rem 1rem;
            box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
            z-index: 20;
        }
        
        /* Ensure chat container has padding to avoid overlap with fixed input */
        .chat-container {
            padding-bottom: 100px;
        }
        
        /* Input container */
        .input-container {
            display: flex;
            align-items: flex-end;
            background: #f7f7f8;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            padding: 0.5rem;
        }
        
        /* Textarea */
        .input-area textarea {
            background: transparent;
            border: none;
            outline: none;
            resize: none;
            flex-grow: 1;
            font-size: 0.875rem;
            line-height: 1.5;
            min-height: 2.75rem;
            max-height: 8rem;
            padding: 0.5rem 0.75rem;
        }
        
        /* Send button */
        .input-area .send-btn {
            background: #000;
            color: #fff;
            border-radius: 0.375rem;
            padding: 0.5rem;
            width: 2.25rem;
            height: 2.25rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }
        .input-area .send-btn:hover:not(:disabled) {
            background: #333;
        }
        .input-area .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Clear button */
        .input-area .clear-btn {
            color: #6b7280;
            padding: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .input-area .clear-btn:hover {
            color: #374151;
        }
        
        /* Typing indicator */
        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 0.5rem 1rem;
            background: #fff;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        /* Message sound notification */
        .message-sound {
            position: absolute;
            opacity: 0;
            pointer-events: none;
        }
        
        /* Burger menu styles */
        .burger-menu {
            display: none;
        }
        .burger-menu.open .burger-icon span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }
        .burger-menu.open .burger-icon span:nth-child(2) {
            opacity: 0;
        }
        .burger-menu.open .burger-icon span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -7px);
        }
        .burger-nav {
            transition: transform 0.3s ease-in-out;
        }
        .burger-nav.open {
            transform: translateX(0);
        }
        
        /* Mobile-specific styles */
        @media (max-width: 640px) {
            body {
                padding: 0;
                margin: 0;
            }
            .chat-container-wrapper {
                padding: 0 !important;
                margin: 0 !important;
                border-radius: 0 !important;
                box-shadow: none !important;
            }
            .chat-container {
                padding-left: 0.5rem !important;
                padding-right: 0.5rem !important;
                padding-bottom: 100px !important;
            }
            .input-area {
                position: fixed;
                bottom: env(safe-area-inset-bottom, 0);
                left: 0;
                transform: none;
                width: 100%;
                max-width: none;
                padding: 0.5rem;
                box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
            }
            .modal-content {
                width: 95%;
                padding: 1rem;
            }
            .burger-menu {
                display: block;
            }
            .desktop-nav {
                display: none;
            }
            .burger-nav {
                position: fixed;
                top: 0;
                right: 0;
                height: 100%;
                width: 100%;
                background: #000;
                transform: translateX(100%);
                z-index: 100;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                padding: 2rem;
            }
            .close-btn {
                position: absolute;
                top: 1rem;
                right: 1rem;
                color: #fff;
                font-size: 1.5rem;
                padding: 0.5rem;
                transition: color 0.2s;
            }
            .close-btn:hover {
                color: #ccc;
            }
            .burger-nav-links {
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                flex-grow: 1;
            }
            .become-icon {
                display: none;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
    <!-- Header -->
    <header class="bg-black text-white p-4 shadow-md sticky top-0 z-10">
        <div class="container mx-auto flex justify-between items-center">
            <a href="index.html" class="text-xl font-bold tracking-wider" aria-label="Beige Home">BEIGE</a>
            <div class="flex items-center space-x-4">
                <div class="hidden md:flex desktop-nav space-x-6">
                    <a href="about.html" class="hover:text-gray-600 transition-colors duration-300 text-sm uppercase" aria-label="About Beige">ABOUT</a>
                    <a href="models.html" class="hover:text-gray-600 transition-colors duration-300 text-sm uppercase" aria-label="Models">MODELS</a>
                    <a href="1.html" class="hover:text-gray-600 transition-colors duration-300 text-sm uppercase" aria-label="Become a Model">BECOME A MODEL</a>
                    <a href="booking.html" class="hover:text-gray-600 transition-colors duration-300 text-sm uppercase" aria-label="Booking Models">BOOKING</a>
                </div>
                <a href="1.html" class="become-icon register-icon text-white hover:text-gray-300 transition" aria-label="Book a Model"><i class="fas fa-clipboard-list"></i></a>
                <button class="burger-menu md:hidden p-2 rounded-full hover:bg-gray-800 transition">
                    <div class="burger-icon flex flex-col space-y-1">
                        <span class="w-6 h-0.5 bg-white"></span>
                        <span class="w-6 h-0.5 bg-white"></span>
                        <span class="w-6 h-0.5 bg-white"></span>
                    </div>
                </button>
            </div>
        </div>
        <!-- Burger Menu Navigation -->
        <nav class="burger-nav md:hidden flex flex-col">
            <button class="close-btn">
                <i class="fas fa-times"></i>
            </button>
            <div class="burger-nav-links flex flex-col space-y-4 text-center">
                <a href="about.html" class="text-white text-lg hover:text-gray-300 transition" aria-label="About Beige">ABOUT</a>
                <a href="models.html" class="text-white text-lg hover:text-gray-300 transition" aria-label="Models">MODELS</a>
                <a href="1.html" class="text-white text-lg hover:text-gray-300 transition" aria-label="Become a Model">BECOME A MODEL</a>
                <a href="booking.html" class="text-white text-lg hover:text-gray-300 transition" aria-label="Booking Models">BOOKING</a>
            </div>
        </nav>
    </header>

    <!-- Main content -->
    <main class="flex-1 flex flex-col">
        <!-- Chat container -->
        <div class="chat-container-wrapper w-full bg-white sm:rounded-lg sm:shadow-md sm:mx-auto sm:my-4 sm:max-w-3xl flex-1 flex flex-col">
            <div id="chat-container" class="chat-container flex-1 overflow-y-auto custom-scrollbar space-y-4 sm:p-4">
                <!-- Welcome message -->
                <div class="chat-bubble flex">
                    <div class="w-10 h-10 rounded-full bg-gray-100 flex-shrink-0 flex items-center justify-center mr-3">
                        <i class="fas fa-robot text-black"></i>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm max-w-3xl border border-gray-200">
                        <p class="text-gray-800 font-medium">Hello! I'm Anne, your Model Application Assistant.</p>
                        <p class="text-gray-800 mt-2">I'll guide you through the application process step by step with precision and professionalism.</p>
                        <div class="mt-3 flex flex-wrap gap-2">
                            <button onclick="startApplication()" class="option-button px-3 py-1 bg-black hover:bg-gray-800 rounded-full text-sm text-white transition">
                                <i class="fas fa-play mr-1"></i> Start Application
                            </button>
                            <button onclick="addMessageToChat('user', 'I have a question about the application')" class="option-button px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-full text-sm text-gray-800 transition">
                                <i class="fas fa-question mr-1"></i> Ask a Question
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Input area -->
            <div class="input-area">
                <div id="typing-indicator" class="typing-indicator hidden">
                    <div class="flex items-center space-x-1">
                        <div class="w-10 h-10 rounded-full bg-gray-100 flex-shrink-0 flex items-center justify-center mr-3">
                            <i class="fas fa-robot text-black"></i>
                        </div>
                        <div class="flex space-x-1">
                            <div class="typing-dot w-2 h-2 bg-gray-600 rounded-full"></div>
                            <div class="typing-dot w-2 h-2 bg-gray-600 rounded-full"></div>
                            <div class="typing-dot w-2 h-2 bg-gray-600 rounded-full"></div>
                        </div>
                    </div>
                </div>
                <div class="input-container">
                    <div class="flex-1 relative">
                        <textarea
                            id="user-input"
                            rows="1"
                            placeholder="Message Anne..."
                            class="w-full"
                        ></textarea>
                        <button id="clear-btn" class="clear-btn absolute right-2 bottom-2 hidden">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <button id="send-btn" class="send-btn" disabled>
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Photo Requirements Modal -->
    <div id="photo-requirements-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3>Photo Submission Requirements</h3>
            <p>Photos must be one full body and one portrait, without makeup or filters, no merged or profile shots.</p>
            <button onclick="closeModal()">Understood</button>
        </div>
    </div>

    <!-- Sound elements -->
    <audio id="message-sound" class="message-sound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-positive-interface-beep-221.mp3" type="audio/mpeg">
    </audio>
    <audio id="send-sound" class="message-sound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-modern-click-box-check-1120.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Application data
        const applicationData = {
            measurements: '',
            justCo: '',
            height: '',
            photos: '',
            instagram: '',
            tiktok: '',
            location: '',
            dob: '',
            email: ''
        };

        // Current question index
        let currentQuestion = 0;
        let isApplicationActive = false;

        // Questions for the application process
        const applicationQuestions = [
            {
                question: "Let's begin with your body measurements. Please provide your bust, waist, and hip sizes in centimeters, formatted as three numbers separated by hyphens (e.g., 86-61-89).",
                field: 'measurements',
                example: "Example format: 86-61-89 (bust-waist-hip in cm)"
            },
            {
                question: "Are you currently represented by any modeling agency or have you worked with agencies in the past? (Just & Co field)",
                field: 'justCo',
                example: "Example: 'Elite Model Management' or 'Independent'"
            },
            {
                question: "Please provide your height in feet and inches using the standard format (e.g., 5'9\").",
                field: 'height',
                example: "Example format: 5'9\" or 6'1\""
            },
            {
                question: "You will need to submit two photos separately (e.g., via email): one full-body shot and one portrait. Please confirm you understand by typing 'I understand' or ask any questions about the photo requirements.",
                field: 'photos',
                example: "Example response: 'I understand'"
            },
            {
                question: "Do you maintain an Instagram profile? If so, please share your username or a direct link.",
                field: 'instagram',
                example: "Example: https://www.instagram.com/yourusername or @yourusername"
            },
            {
                question: "Do you have an active TikTok account? If applicable, please provide your username or profile link.",
                field: 'tiktok',
                example: "Example: https://www.tiktok.com/@yourusername or @yourusername"
            },
            {
                question: "Please specify your current location (city and country).",
                field: 'location',
                example: "Example: 'Los Angeles, USA' or 'London, UK'"
            },
            {
                question: "What is your date of birth? Please use the international standard format (YYYY-MM-DD).",
                field: 'dob',
                example: "Example: 1995-05-15"
            },
            {
                question: "Finally, please provide a professional email address we can use to contact you regarding opportunities.",
                field: 'email',
                example: "Example: yourname@example.com"
            }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            const chatContainer = document.getElementById('chat-container');
            const userInput = document.getElementById('user-input');
            const sendBtn = document.getElementById('send-btn');
            const clearBtn = document.getElementById('clear-btn');
            const typingIndicator = document.getElementById('typing-indicator');
            const inputArea = document.querySelector('.input-area');
            const messageSound = document.getElementById('message-sound');
            const sendSound = document.getElementById('send-sound');
            const burgerMenu = document.querySelector('.burger-menu');
            const burgerNav = document.querySelector('.burger-nav');
            const closeBtn = document.querySelector('.close-btn');

            // Toggle burger menu
            burgerMenu.addEventListener('click', function() {
                this.classList.toggle('open');
                burgerNav.classList.toggle('open');
            });

            // Close burger menu when close button or links are clicked
            closeBtn.addEventListener('click', function() {
                burgerMenu.classList.remove('open');
                burgerNav.classList.remove('open');
            });

            burgerNav.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    burgerMenu.classList.remove('open');
                    burgerNav.classList.remove('open');
                });
            });

            // Play sound function
            function playSound(soundElement) {
                soundElement.currentTime = 0;
                soundElement.play().catch(e => console.log("Sound playback prevented:", e));
            }

            // Debounce function to limit rapid scroll calls
            function debounce(func, wait) {
                let timeout;
                return function(...args) {
                    clearTimeout(timeout);
                    timeout = setTimeout(() => func.apply(this, args), wait);
                };
            }

            // Scroll to bottom of chat with smooth behavior
            const scrollToBottom = debounce(function() {
                requestAnimationFrame(() => {
                    chatContainer.scrollTo({
                        top: chatContainer.scrollHeight,
                        behavior: 'smooth'
                    });
                });
            }, 100);

            // Auto-resize textarea
            userInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = `${this.scrollHeight}px`;
                clearBtn.classList.toggle('hidden', this.value.trim().length === 0);
                sendBtn.disabled = this.value.trim().length === 0;
            });

            // Handle mobile keyboard
            if (window.visualViewport) {
                window.visualViewport.addEventListener('resize', debounce(() => {
                    if (document.activeElement === userInput) {
                        scrollToBottom();
                    }
                }, 100));
            }

            // Scroll on textarea focus
            userInput.addEventListener('focus', () => {
                scrollToBottom();
            });

            // Clear input
            clearBtn.addEventListener('click', function() {
                userInput.value = '';
                userInput.style.height = '2.75rem';
                clearBtn.classList.add('hidden');
                sendBtn.disabled = true;
                userInput.focus();
            });

            // Send message on Enter (Shift+Enter for new line)
            userInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    if (userInput.value.trim().length > 0) {
                        sendMessage();
                    }
                }
            });

            // Send button click
            sendBtn.addEventListener('click', sendMessage);

            function sendMessage() {
                const message = userInput.value.trim();
                if (message.length === 0) return;

                // Play send sound
                playSound(sendSound);
                
                addMessageToChat('user', message);
                userInput.value = '';
                userInput.style.height = '2.75rem';
                clearBtn.classList.add('hidden');
                sendBtn.disabled = true;

                typingIndicator.classList.remove('hidden');
                scrollToBottom();

                setTimeout(() => {
                    typingIndicator.classList.add('hidden');
                    if (isApplicationActive) {
                        processApplicationAnswer(message);
                    } else {
                        const response = generateAIResponse(message);
                        addMessageToChat('ai', response);
                    }
                    scrollToBottom();
                }, 1000 + Math.random() * 2000);
            }

            function addMessageToChat(sender, message) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `chat-bubble flex ${sender === 'user' ? 'justify-end' : ''}`;

                if (sender === 'user') {
                    messageDiv.innerHTML = `
                        <div class="bg-black text-white p-4 rounded-lg shadow-sm max-w-3xl">
                            <p>${message}</p>
                        </div>
                        <div class="w-10 h-10 rounded-full bg-gray-800 flex-shrink-0 flex items-center justify-center ml-3">
                            <i class="fas fa-user text-white"></i>
                        </div>
                    `;
                } else {
                    // Play message received sound for AI messages
                    if (sender === 'ai') {
                        playSound(messageSound);
                    }
                    
                    const currentQ = applicationQuestions[currentQuestion];
                    const isAppQuestion = isApplicationActive && currentQ && currentQ.question === message;

                    messageDiv.innerHTML = `
                        <div class="w-10 h-10 rounded-full bg-gray-100 flex-shrink-0 flex items-center justify-center mr-3">
                            <i class="fas fa-robot text-black"></i>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-sm max-w-3xl border border-gray-200">
                            <p class="text-gray-800">${message}</p>
                            ${isAppQuestion && currentQ.example ? `
                                <div class="example-box">${currentQ.example}</div>
                            ` : ''}
                        </div>
                    `;
                }

                chatContainer.appendChild(messageDiv);
                scrollToBottom();
            }

            function generateAIResponse(userMessage) {
                const lowerMessage = userMessage.toLowerCase();

                if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey')) {
                    return "Hello! I'm Anne, your professional model application assistant. How may I assist you today?";
                } else if (lowerMessage.includes('measurement') || lowerMessage.includes('b-w-h')) {
                    return "For precise measurements, please provide your bust, waist, and hip sizes in centimeters, separated by hyphens (e.g., 86-61-89). Accurate measurements are crucial for proper evaluation.";
                } else if (lowerMessage.includes('height') || lowerMessage.includes('tall')) {
                    return "Height requirements vary by market. Please provide your exact height in feet and inches (e.g., 5'9\"). Most fashion models range between 5'9\" and 6'0\" for women, 5'11\" to 6'2\" for men.";
                } else if (lowerMessage.includes('photo') || lowerMessage.includes('picture') || lowerMessage.includes('image')) {
                    return "For your application portfolio, you'll need: 1) A full-body shot in form-fitting clothing (swimsuit or athletic wear preferred), and 2) A clean portrait with minimal makeup. Both should be well-lit with a neutral background. Digital submissions should be high resolution. Photos must be one full body and one portrait, without makeup or filters, no merged or profile shots.";
                } else if (lowerMessage.includes('instagram') || lowerMessage.includes('tiktok') || lowerMessage.includes('social media')) {
                    return "Social media presence is increasingly important. Please provide links to your Instagram and/or TikTok profiles if available. Ensure profiles are public and represent your professional image.";
                } else if (lowerMessage.includes('just & co') || lowerMessage.includes('just and co') || lowerMessage.includes('agency')) {
                    return "The 'Just & Co' field documents your agency representation history. List current or past agencies, or 'Independent' if unrepresented. Exclusive contracts should be disclosed.";
                } else if (lowerMessage.includes('process') || lowerMessage.includes('next step') || lowerMessage.includes('what happens')) {
                    return "Our review process: 1) Initial application screening (2-3 weeks), 2) Potential callback for interview, 3) Test shoots if applicable, 4) Final evaluation. We maintain high standards and appreciate your patience.";
                } else if (lowerMessage.includes('requirement') || lowerMessage.includes('need') || lowerMessage.includes('qualification')) {
                    return "Key evaluation criteria include: 1) Photogenic qualities, 2) Professional demeanor, 3) Distinctive features, 4) Proportional measurements, 5) Portfolio potential. Training and experience are assets but not mandatory.";
                } else if (lowerMessage.includes('age') || lowerMessage.includes('old') || lowerMessage.includes('young')) {
                    return "We consider applicants aged 16+ (with parental consent for minors). There's no upper age limit—we represent diverse demographics including mature models. Different markets have varying age preferences.";
                } else if (lowerMessage.includes('location') || lowerMessage.includes('where') || lowerMessage.includes('city')) {
                    return "Please specify your current location (city and country). While we're based in major fashion capitals, we work with talent worldwide. Some opportunities may require relocation or extensive travel.";
                } else if (lowerMessage.includes('time') || lowerMessage.includes('long') || lowerMessage.includes('response')) {
                    return "Our review timeline is typically 2-3 weeks for initial response. Due to volume, we may not respond to all applications. You're welcome to follow up after 3 weeks if you haven't heard from us.";
                } else if (lowerMessage.includes('thank')) {
                    return "You're most welcome. It's my pleasure to assist you with your professional modeling application.";
                } else {
                    const defaultResponses = [
                        "I specialize in guiding models through the application process. What specific information would you like?",
                        "As your professional assistant, I can clarify any aspect of the modeling application. What would you like to know?",
                        "Would you like me to systematically guide you through the application requirements?"
                    ];
                    return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
                }
            }

            function startApplication() {
                isApplicationActive = true;
                currentQuestion = 0;

                while (chatContainer.children.length > 1) {
                    chatContainer.removeChild(chatContainer.lastChild);
                }

                addMessageToChat('ai', "Thank you for choosing to begin your professional modeling application. I'll guide you through each required field systematically. Please provide accurate information for optimal evaluation.");

                setTimeout(() => {
                    askQuestion(currentQuestion);
                    scrollToBottom();
                }, 1000);
            }

            function askQuestion(index) {
                if (index >= applicationQuestions.length) {
                    showApplicationReview();
                    return;
                }

                const question = applicationQuestions[index];
                addMessageToChat('ai', question.question);
            }

            function processApplicationAnswer(answer) {
                const currentField = applicationQuestions[currentQuestion].field;
                applicationData[currentField] = answer;

                // Show modal after answering the photos question
                if (currentField === 'photos') {
                    document.getElementById('photo-requirements-modal').classList.remove('hidden');
                } else {
                    currentQuestion++;
                    askQuestion(currentQuestion);
                }
            }

            function closeModal() {
                document.getElementById('photo-requirements-modal').classList.add('hidden');
                // Proceed to next question after closing modal
                if (applicationQuestions[currentQuestion].field === 'photos') {
                    currentQuestion++;
                    askQuestion(currentQuestion);
                    scrollToBottom();
                }
            }

            function showApplicationReview() {
                let reviewMessage = "APPLICATION SUMMARY:\n\n";

                for (const [key, value] of Object.entries(applicationData)) {
                    if (value && key !== 'photos') { // Exclude photos from summary
                        const displayKey = key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
                        reviewMessage += `• ${displayKey}: ${value}\n`;
                    }
                }

                reviewMessage += "\nYour photo submission confirmation has been noted. Please ensure you submit your photos as directed. Would you like to submit your application now or make revisions?";

                addMessageToChat('ai', reviewMessage);

                const actionDiv = document.createElement('div');
                actionDiv.className = 'flex space-x-2 mt-3';
                actionDiv.innerHTML = `
                    <button onclick="submitApplication()" class="option-button bg-black hover:bg-gray-800 text-white">
                        <i class="fas fa-check mr-1"></i> Submit Application
                    </button>
                    <button onclick="editApplication()" class="option-button bg-gray-100 hover:bg-gray-200 text-gray-800">
                        <i class="fas fa-edit mr-1"></i> Make Changes
                    </button>
                `;

                const botMessages = document.querySelectorAll('.chat-bubble:not(.justify-end)');
                const lastBotMessage = botMessages[botMessages.length - 1].querySelector('.bg-white');
                lastBotMessage.appendChild(actionDiv);

                scrollToBottom();
            }

            function submitApplication() {
                addMessageToChat('user', 'Submit my application');

                setTimeout(() => {
                    addMessageToChat('ai', "APPLICATION SUBMITTED\n\nThank you for your professional submission. We've received your information and will conduct a thorough review. Please submit your portfolio photos as directed (one full body and one portrait, without makeup or filters, no merged or profile shots). Our team will contact you within 2-3 weeks if we wish to proceed.");
                    isApplicationActive = false;
                    currentQuestion = 0;
                    for (const key in applicationData) {
                        applicationData[key] = '';
                    }
                    scrollToBottom();
                }, 1000);
            }

            function editApplication() {
                addMessageToChat('user', 'I need to edit my application');

                setTimeout(() => {
                    addMessageToChat('ai', "Which section requires revision? Please select from the following:");

                    const fieldsDiv = document.createElement('div');
                    fieldsDiv.className = 'flex flex-wrap gap-2 mt-3';

                    applicationQuestions.forEach((q, index) => {
                        if (applicationData[q.field] && q.field !== 'photos') { // Exclude photos from edit options
                            const button = document.createElement('button');
                            button.className = 'option-button';
                            button.textContent = q.field.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
                            button.onclick = () => {
                                currentQuestion = index;
                                askQuestion(currentQuestion);
                            };
                            fieldsDiv.appendChild(button);
                        }
                    });

                    const botMessages = document.querySelectorAll('.chat-bubble:not(.justify-end)');
                    const lastBotMessage = botMessages[botMessages.length - 1].querySelector('.bg-white');
                    lastBotMessage.appendChild(fieldsDiv);

                    scrollToBottom();
                }, 1000);
            }

            window.startApplication = startApplication;
            window.submitApplication = submitApplication;
            window.editApplication = editApplication;
            window.addMessageToChat = addMessageToChat;
            window.closeModal = closeModal;

            // Initialize scroll to bottom on load
            setTimeout(scrollToBottom, 300);
        });
    </script>
</body>
</html>